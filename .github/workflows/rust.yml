name: Rust

on:
  push:
    branches: [ "master" ]

env:
  CARGO_TERM_COLOR: always

jobs:
  create-pull-request:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
        with:
            ref: develop
      - uses: actions-rs/toolchain@v1
        with:
          toolchain: stable
      - run: cargo rustdoc --target-dir docs
      - run: |
              git add .
              git commit -m "generated"
              git push
      - name: pull-request
        uses: repo-sync/pull-request@v4
        with:
          destination_branch: "develop"
          github_token: ${{ secrets.GITHUB_TOKEN }}
          pr_label: "feature, automated pr"
          pr_title: "docs creation"
